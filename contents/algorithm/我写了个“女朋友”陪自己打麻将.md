---
author: kevintao
updated: 2023-02-07T10:24:36.983Z
created: 2023-02-08T10:24:36.983Z
title: æˆ‘å†™äº†ä¸ªâ€œå¥³æœ‹å‹â€é™ªè‡ªå·±æ‰“éº»å°†
title-en: I wrote a "girlfriend" to play mahjong with me
tags:
  - algorithm
---

[TOC]

## åº

ä¸€ä¸ªæœˆé»‘é£é«˜çš„æ™šä¸Šï¼Œæˆ‘æ­£ååœ¨å·¥ä½çš„ç”µè„‘å‰~~ç²¾åŠ›å……æ²›çš„~~ç–²å€¦ä¸å·²çš„å†™ç€ bugã€‚

çªç„¶ï¼Œä¸€é€šå¤‡æ³¨ç€â€œå°ä»™å¥³â€çš„ç”µè¯æ‰“äº†è¿‡æ¥ï¼Œæˆ‘ä¸€çœ‹èµ¶ç´§æ¥é€šäº†å¥³æœ‹å‹çš„ç”µè¯ã€‚

ç”µè¯é‚£è¾¹ä¼ æ¥æ¸©æŸ”çš„å£°éŸ³â€œå¥½æ— èŠå‘€ï¼Œè¿‡æ¥é™ªæˆ‘ä¸€èµ·æ‰“éº»å°†å§â€

å¯æ˜¯äº‹ä¸šå¿ƒå¼ºå¹¶ä¸”å†™ç€ bug çš„æˆ‘æ€ä¹ˆèƒ½å¤Ÿå»å’Œå¥³æœ‹å‹æ‰“éº»å°†å‘¢ï¼Ÿ

äºæ˜¯åœ¨çŠ¹è±«äº†ä¸€ç§’ä¹‹åæˆ‘ä¾¿èµ·èº«è€Œå‡ºã€‚

è§åˆ°äº†å¯çˆ±çš„å¥³æœ‹å‹ï¼Œæˆ‘ä»¬ä¾¿å…´å¥‹çš„æ“èµ·äº†éº»å°†ã€‚

æ“äº†ä¸€è½®ä¸€è½®åˆä¸€è½®â€¦â€¦

å¯æ˜¯å®åœ¨æ˜¯å¤ªå›°ï¼Œæ“ç€æ“ç€æˆ‘ç«Ÿç„¶ç¡ç€äº†ã€‚

â€œæ¶›å“¥ï¼Œæ¶›å“¥ï¼Œå¿«é†’é†’ï½â€œ

åœ¨åŒäº‹çš„å‘¼å”¤ä¸­æˆ‘æ‰äº†æ‰æœ¦èƒ§çš„åŒçœ¼ï¼Œçœ‹ç€çœ¼å‰æ¨¡ç³Šçš„æ¡Œé¢ï¼Œè½¬äº†è½¬è„‘è¢‹ï¼Œæˆ‘è¿™æ‰ååº”è¿‡æ¥æˆ‘æ˜¯åœ¨å…¬å¸å†™ä»£ç å†™ç¡ç€äº†ï¼Œéš¾é“åˆšæ‰çš„ä¸€åˆ‡éƒ½æ˜¯æ¢¦ï¼Ÿ

![](https://img-blog.csdnimg.cn/img_convert/ef010f0e3e264120e42509e2887e63d5.png)

æˆ‘å‘åŒäº‹è¿°è¯´ç€åˆšæ‰çš„äº‹æƒ…ï¼Œå¯åŒäº‹å¸¦ç€å˜²ç¬‘çš„å£æ°”è¯´â€œåˆ«åšæ¢¦äº†ï¼Œè¿˜å¥³æœ‹å‹ï¼Ÿé™¤äº†ä½ å†™çš„æœºå™¨äººè¿˜æœ‰è°ä¼šé™ªä½ æ‰“éº»å°†å“ˆå“ˆå“ˆâ€

æˆ‘å¾ˆç”Ÿæ°”ï¼Œä½†æ˜¯æ‹¿å‡ºæ‰‹æœºçœ‹äº†é€šè¯è®°å½•ç¡®å®æ²¡æœ‰ä»€ä¹ˆâ€œå°ä»™å¥³â€ã€‚

![](https://img-blog.csdnimg.cn/img_convert/31c585fb28094ee1daa9d9ea47753711.png)

ä¸€ç•ªå†·é™åï¼Œæˆ‘å°†åŒæ‰‹æ”¾åœ¨äº†ç¬”è®°æœ¬ä¸Šï¼ŒæŠšæ‘¸ç€é¡ºæ»‘çš„é”®ç›˜ï¼Œå»å¥¹çš„å°ä»™å¥³ï¼Œæˆ‘è¿˜æ˜¯é™ªæˆ‘çš„æœºå™¨äººå§ã€‚

è™½ç„¶è‡ªå·±å¾ˆéš¾å—ï¼Œä½†è¿˜æ˜¯ç§‰æ‰¿ç€åŠ©äººä¸ºä¹çš„ç²¾ç¥æ•™æ•™å•èº«æ±ªèŒæ€ä¹ˆå†™æœºå™¨äººé™ªè‡ªå·±ç©ã€‚

ä»¥ä¸‹ï¼Œæ­£æ–‡ã€‚

## éº»å°†é¢„å¤‡çŸ¥è¯†

æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹éº»å°†çš„é¢„å¤‡çŸ¥è¯†ï¼Œç”±äºå…¨å›½å„åœ°çš„éº»å°†è§„åˆ™å’Œå«æ³•ä¸å°½ç›¸åŒï¼Œåœ¨è¿™ä»¥æ—¥éº»åšç»Ÿä¸€ã€‚æœ‰ä¸€å®šéº»å°†åŸºç¡€çš„å¯ä»¥è·³è¿‡

å®šä¹‰è§„åˆ™ï¼š`ã€Œã€`è¡¨æ˜å’Œå›½å†…éº»å°†æœ‰æ‰€ä¸åŒä¹‹å¤„ï¼› åŠ `â€¢`ä¸ºé€šç”¨æ ‡å‡†å®šä¹‰ï¼›åŠ `#`ä¸ºæœ¬æ–‡ç« å®šä¹‰æˆ–éº»å°†ç‰Œå‹ä¹‹é—´çš„é€šä¿—ç”¨æ³•ï¼ˆéé€šç”¨ç”¨æ³•ï¼‰

åç§°å®šä¹‰ï¼šï¼ˆå…¶ä¸­åŠ ç²—çš„æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼‰

\#æ¡å­ç®€ç§° sï¼Œé¥¼å­ç®€ç§° pï¼Œä¸‡å­ç®€ç§° mã€‚ä¸€èˆ¬å¤šç”¨äºå¿«é€Ÿå½¢å®¹æ‰‹ç‰Œã€‚ç”¨æ³•ä¾‹å¦‚ï¼š234p55678s3478m è¥¿

â€¢è€å¤´ç‰Œï¼šä¸€åˆ°ä¹çš„ sï¼ˆç´¢ï¼‰ã€pï¼ˆé¥¼ï¼‰ã€mï¼ˆä¸‡ï¼‰çš„ç»Ÿç§°ã€‚å…± 24 å¼ 

â€¢ä¸‰å…ƒç‰Œï¼šç™½å‘ä¸­ ç‰Œç»Ÿç§°ã€Œæ—¥éº»é¡ºåºã€ã€‚å…± 12 å¼ 

â€¢å››é£ç‰Œï¼šä¸œå—è¥¿åŒ— ç‰Œç»Ÿç§°ã€‚å…± 16 å¼ 

â€¢æš—åˆ»å­ï¼šç‰Œä¸­å«æœ‰ä¸‰ä¸ªä¸€æ ·çš„ç‰Œç»„

â€¢æ˜åˆ»å­ï¼šç¢°å½¢æˆçš„ä¸‰ä¸ªä¸€æ ·çš„ç‰Œç»„

**â€¢åˆ»å­ï¼šæš—åˆ»å­å’Œæ˜åˆ»å­ç»Ÿç§°**

**â€¢é¡ºå­ï¼šç›¸åŒèŠ±è‰²ï¼Œç›¸è¿çš„ä¸‰å¼ æ„æˆçš„ç‰Œç»„**

**â€¢é¢å­ï¼šé¡ºå­ä¸åˆ»å­çš„ç»Ÿç§°**

â€¢å°†ç‰Œ\é›€å¤´ï¼šä¸€å¯¹ç›¸åŒçš„ç‰Œï¼ˆå¦‚æœä¸€å¯¹ç›¸åŒçš„ç‰Œè¢«åˆ†åœ¨ä¸åŒçš„ç‰Œç»„é‡Œå¿…ç„¶ä¸ç®—ï¼‰ï¼Œç®€ç§°ï¼šï¼‚å°†ï¼‚ã€‚

**â€¢åƒï¼šä¸Šå®¶æ‰“å‡ºç‰Œï¼Œä¸ä¸‹å®¶çš„ç‰Œæ­£å¥½ç»„æˆä¸€å‰¯é¡ºå­**

**â€¢ç¢°ï¼šå…¶ä»–äººæ‰“å‡ºä¸€å¼ ç‰Œï¼Œè‡ªå·±æ‰‹ä¸­æœ‰ä¸¤å¼ ç›¸åŒçš„ç‰Œæ­£å¥½ç»„æˆä¸€å‰¯åˆ»å­**

**â€¢æ å­ï¼šå››ä¸ªä¸€æ ·çš„ç‰Œå½¢æˆçš„ç‰Œç»„ï¼ˆéœ€å£°æ˜ æ‰æˆç«‹ï¼‰**

â€¢æ˜æ ï¼šè‡ªå·±æ‰‹ä¸­æœ‰æš—åˆ»ï¼Œç„¶åè·å–åˆ«äººæ‰“å‡ºçš„ç‰Œå£°æ˜æ å­

â€¢æš—æ ï¼šè‡ªå·±æ‰‹ä¸­æœ‰ä¸€ç»„æ å­ï¼Œç›´æ¥å£°æ˜æ å­

**â€¢å’Œäº†ï¼šã€Œå®Œæˆå¸¦ç•ªæ•°çš„ç‰¹æ®Šå’Œç‰Œå‹ã€**

**\#æ ‡å‡†å’Œç‰Œå‹ï¼šå››ç»„é¢å­å’Œä¸€å°†ç‰Œ**

**\#å’Œç‰Œå‹ï¼šæ ‡å‡†å’Œç‰Œå‹+ä¸ƒå¯¹å­+å›½å£«æ— åŒï¼ˆä¸­éº»é‡Œçš„ï¼‚åä¸‰å¹ºï¼‚ï¼‰**

â€¢è‡ªæ‘¸ï¼šè‡ªå·±æ‘¸ç‰Œå’Œäº†ã€‚

â€¢è£å’Œï¼šä»–å®¶æ‰“å‡ºç‰Œä½¿ä½ å’Œäº†ã€‚åˆç§°é£Ÿå’Œã€‚

â€¢å‡ºç»Ÿï¼šä¸€å®¶æ‰“çš„ç‰Œä½¿å¦ä¸€å®¶è£å’Œã€‚ä¸­éº»é‡Œå«ï¼‚ç‚¹ç‚®ï¼‚ã€‚

**â€¢å¬ç‰Œï¼šå·®ä¸€å¼ ç‰Œå°±å¯ä»¥å®Œæˆå’Œç‰Œå‹çš„çŠ¶æ€**

**â€¢å‘å¬ï¼šå·® n å¼ ç‰Œå°±å¯ä»¥å¬ç‰Œç§° n å‘å¬**

**â€¢æ‰‹ç‰Œï¼šéº»å°†å¼€å±€ï¼Œæ¯äººæŒ‰é¡ºåºåˆ†æ¬¡å…ˆåæ‘¸å¾—çš„ 13 å¼ ï¼Œå°±å«ä½œæ‰‹ç‰Œã€‚**

## å’Œç‰Œçš„åˆ¤æ–­

### å’Œç‰Œçš„è§„åˆ™

æˆ‘ä»¬éƒ½çŸ¥é“æ‰“éº»å°†çš„æœ€ç»ˆç›®çš„æ˜¯ã€Œ**å’Œç‰Œ**ã€ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“å’Œç‰Œçš„è§„åˆ™ã€‚

æœ‰å¤šç§å¤šæ ·çš„å’Œç‰Œï¼Œä½†æ˜¯æ€»å½’èµ·æ¥å¯åˆ†ä¸ºï¼š**æ ‡å‡†å’Œç‰Œå‹ã€ä¸ƒå¯¹å­å’Œå›½å£«æ— åŒè¿™ä¸‰ç§**ã€‚

- æ ‡å‡†å’Œç‰Œå‹ä¸º 4 é¢å­+1 é›€å¤´ï¼Œå¯ä»¥ç†è§£ä¸º`n*AAA+m*XYZ+DD`ï¼Œå¦‚ä¸‹å°±æ˜¯ä¸€ç§æ ‡å‡†å‹çš„å’Œç‰Œã€‚

![](https://img-blog.csdnimg.cn/img_convert/5b09101c3b838544790c09d5863165d0.png)

- ä¸ƒå¯¹å­æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯ä¸ƒä¸ªå¯¹å­ï¼Œå¦‚ä¸‹æ˜¯ä¸€ç§ä¸ƒå¯¹å­çš„å’Œç‰Œã€‚

![](https://img-blog.csdnimg.cn/img_convert/3f97b9312548f3851c75c8bac6e38efc.png)

- å›½å£«æ— åŒï¼ˆä¸­å›½éº»å°†åˆç§°åä¸‰å¹ºï¼‰ï¼ŒæŒ‡å…¶ä¸­![](https://img-blog.csdnimg.cn/img_convert/755c705fa9d55b78e97dd36bf69552b4.png)1 ç§ä¸€å¯¹ï¼Œå‰©ä¸‹ 12 ç§å„ä¸€å¼ çš„å’Œç‰Œã€‚å¦‚ä¸‹æ˜¯ä¸€ç§å›½å£«æ— åŒçš„å’Œç‰Œã€‚

![](https://img-blog.csdnimg.cn/img_convert/b90aadc219efa32a399e8e84464cba72.png)

### å’Œç‰Œçš„åˆ¤æ–­æ€è·¯

é‚£ä¹ˆå¦‚ä½•æ•™æœºå™¨äººåˆ¤æ–­å’Œç‰Œå‘¢ï¼Ÿ

1ã€æ‰“è¡¨

ç»™æ¯ç§ç‰Œç¼–ä¸€ä¸ª idï¼Œéº»å°†ä¸­å…± 34 ç§ç‰Œå› æ­¤éœ€è¦è‡³å°‘ 6 ä½ç©ºé—´ã€‚æ‰‹ç‰Œ 14 å¼ ä¹Ÿå°±æ˜¯ 84 ä½ã€‚è¦ä¿å­˜å’Œç‰Œçš„å…¨éƒ¨ç»„åˆçº¦ 1700 ä¸‡ç§éœ€è¦çº¦ 175MB å­˜å‚¨ã€‚

æŸ¥è¡¨æ³•æ¯”è¾ƒåƒå†…å­˜ï¼Œä½†æ˜¯æ®è¯´å¤©å‡¤ä¹‹ç±»çš„ç½‘æ¸¸å°±æ˜¯è¿™ä¹ˆç®—çš„ã€‚

2ã€æš´åŠ›æ‹†è§£

å¯ä»¥ä½¿ç”¨é€’å½’ï¼Œæ‹†å‡ºé¡ºå­ã€åˆ»å­ã€å°†ç‰Œã€‚

æš´åŠ›æ‹†è§£æ¯”è¾ƒè€—æ—¶é—´ï¼Œä½†æ˜¯å¯ç»´æŠ¤æ€§è¾ƒå¥½ã€‚

é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ï¼Ÿä¸ºäº†ç»ä½³çš„æ¸¸æˆä½“éªŒï¼Œæˆ‘å†’ç€ç§ƒå¤´çš„å±é™©æ‰¾åˆ°äº†æ”¹è¿›çš„æ–¹æ¡ˆã€‚

3ã€æ–¹æ¡ˆæ¥è‡ª [hp.vector.co.jp](http://hp.vector.co.jp/authors/VA046927/mjscore/mjalgorism.html)

æ”¹è¿›çš„æ€è·¯æ˜¯å…ˆç»™æ‰‹ç‰Œæ’åºï¼Œç„¶åä¸ç®¡å…·ä½“ç‰Œé¢ï¼Œåªè®¡ç®—è¿ç»­ç‰Œçš„å¼ æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªã€Œç‰Œå‹ã€ï¼Œå†ä»è¡¨ä¸­æŸ¥ç‰Œå‹æ˜¯å¦èƒ¡ã€‚

ä¾‹å¦‚ã€Œ222456 ä¸‡ 345678 é¥¼åŒ—åŒ—ã€ï¼Œå¯ä»¥ç¼–ç ä¸ºã€Œ30111011111102ã€ï¼ˆä¸‰å¼ ç›¸åŒç‰Œï¼Œä¸‰å¼ è¿ç»­ç‰Œï¼Œå…­å¼ è¿ç»­ç‰Œï¼Œä¸¤å¼ ç›¸åŒç‰Œï¼Œä¸­é—´éš”å¼€ï¼‰ã€‚

ä¸‹ä¸€æ­¥æ˜¯å°†å…¶äºŒè¿›åˆ¶åŒ–ï¼Œé‡‡ç”¨å¦‚ä¸‹ç‰¹åˆ¶è§„åˆ™ï¼š

1â†’0
2â†’110
3â†’11110
4â†’1111110
10â†’10
20â†’1110
30â†’111110
40â†’11111110

è¿™æ ·ç¼–ç åæ¯å¼ ç‰Œåªå ç”¨ 1 åˆ° 2 ä½ç©ºé—´ï¼Œæœ€åæƒ…å†µå­ä¸‹ï¼ˆåå››å¼ ä¸è¿å•ç‰Œï¼‰ä»…å ç”¨ 27 ä½ã€‚è·Ÿä¹‹å‰çš„ 84 ä½ç›¸æ¯”ï¼Œå•ç»„æ•°æ®å‹ç¼©äº†ä¸‰åˆ†ä¹‹äºŒä»¥ä¸Šã€‚æ›´ç‰›é€¼çš„æ˜¯ï¼Œå’Œç‰Œè¡¨ä» 1700 ä¸‡ç§å…·ä½“ç»„åˆä¸‹é™åˆ°ä»…ä»… 9362 ç§å½¢çŠ¶æ’åˆ—ï¼

### å’Œç‰Œçš„åˆ¤æ–­æ ‡å‡†

å¯¹äºå’Œç‰Œçš„åˆ¤æ–­æ ‡å‡†ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ã€Œ**shanten ï¼ˆå‘å¬ï¼‰**ã€è¿™ä¸ªæ¦‚å¿µï¼Œä¸Šé¢ç®€å•è¯´è¿‡ï¼Œ**å·® n å¼ ç‰Œå°±å¯ä»¥å¬ç‰Œç§° n å‘å¬**ã€‚ä¸‹é¢æˆ‘ä»¬ä»¥ä¸€ä¾‹ç‰Œå‹æ¥è¯¦ç»†è¯´æ˜ã€‚

- å½“å‰æ‰‹ç‰Œä¸º**3 å‘å¬**çŠ¶æ€

  ![](https://img-blog.csdnimg.cn/img_convert/57327f2861719e2959ead4e12e3b1523.png)

- æ‰“ã€åŒ—ã€‘ï¼Œæ‘¸ã€ä¸€ä¸‡ã€‘ï¼Œåˆ°**2 å‘å¬**

  ![](https://img-blog.csdnimg.cn/img_convert/80f00e4526b7f30b87fbbc0beaff2e4b.png)

- æ‰“ã€å‘ã€‘ï¼Œæ‘¸ã€å››ä¸‡ã€‘ï¼Œåˆ°**1 å‘å¬**

  ![](https://img-blog.csdnimg.cn/img_convert/978d1b33d22e1b12174d9bc5abdae8e8.png)

- æ‰“ã€ä¸€ç­’ã€‘ï¼Œæ‘¸ã€äº”ä¸‡ã€‘ï¼Œåˆ°å¬ç‰Œï¼ˆ**0 å‘å¬**ï¼‰

  ![](https://img-blog.csdnimg.cn/img_convert/12b311ae1939df4758e12b3de830c6ed.png)

- æ‰“ã€ä¸ƒç­’ã€‘ï¼Œæ‘¸ã€äºŒæ¡ã€‘ï¼Œå’Œç‰Œï¼ˆ**-1 å‘å¬**ï¼‰

  ![](https://img-blog.csdnimg.cn/img_convert/deffd1a7cb6e019dd12a0ee74f4f2310.png)

## å‘å¬çš„è®¡ç®—

æ‰€ä»¥ï¼Œè®©æœºå™¨äººå’Œç‰Œè½¬ä¸ºäº†å‘å¬çš„è®¡ç®—è¿™ä¸€é—®é¢˜ï¼Œæœç€å‘å¬å‡å°‘çš„æ–¹å‘ï¼Œç›´è‡³ -1ï¼Œå³ä¸ºå’Œç‰Œã€‚

ç”±å‰é¢æ‰€æçš„å’Œç‰Œè§„åˆ™ï¼Œæˆ‘ä»¬å¯å°†å‘å¬æ•°çš„è®¡ç®—ä¹Ÿåˆ†ä¸ºï¼š**æ ‡å‡†å’Œç‰Œå‹ã€ä¸ƒå¯¹å­å’Œå›½å£«æ— åŒè¿™ä¸‰ç§**ã€‚

æˆ‘ä»¬å…ˆè§£å†³ä¸¤ç§ç‰¹æ®Šæƒ…å†µã€‚

- ä¸ƒå¯¹å­çš„å‘å¬è®¡ç®—

æ­£å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼Œåœ¨ ä¸ƒå¯¹å­ä¸­ æ”¶é›†ä¸ƒä¸ªå¯¹å­æ˜¯å’Œçš„æ¡ä»¶ã€‚å› æ­¤ï¼Œä¸ºäº†è®¡ç®—å‘å¬ï¼Œè®¡ç®—å¯¹å­çš„æ•°é‡æ˜¯åŸºæœ¬çš„ã€‚ä½œä¸ºä¾‹å­è€ƒè™‘ä¸‹é¢çš„æ‰‹ç‰Œå§ã€‚

![](https://img-blog.csdnimg.cn/img_convert/2ab427210fd33821a42da8e4e1dd3cb4.png)

å¯¹å­æ•°æ˜¯ 5 ä¸ªï¼Œæ˜¯ 1 å‘å¬ã€‚æ¢å¥è¯è¯´ï¼Œ**åœ¨ä¸ƒå¯¹å­çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä½ è®¡ç®—å¯¹å­çš„æ•°é‡ï¼Œç„¶åç”¨ 6 å‡å»å®ƒï¼Œé‚£å°±æ˜¯å‘å¬ã€‚**ä¾‹å¦‚ï¼Œå¦‚æœå¯¹å­æœ‰ 6 ä¸ªå³å¬ç‰Œ(0 å‘å¬) ï¼Œå¦‚æœæœ‰ 7 ä¸ªå³å’Œäº†(- 1 å‘å¬)ã€‚

> ä¸ƒå¯¹å­çš„å‘å¬ = 6 - å¯¹å­æ•°

ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ä»¥ä¸‹æƒ…å†µã€‚

![](https://img-blog.csdnimg.cn/img_convert/3a0f509c1d9e3504621c57e4b431d8e6.png)

å…­é¥¼æ˜¯æš—å­ï¼Œä¸è¿‡ï¼Œè¿™ä¸ªä¹Ÿä½œä¸ºå¯¹å­éœ€è¦æ•°æ•°ã€‚

å¦å¤–ï¼Œè¿˜éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ä»¥ä¸‹æƒ…å†µã€‚

![](https://img-blog.csdnimg.cn/img_convert/a26ebb4aec24f690f974e15a951027fb.png)

è¿™æ˜¯å…­ä¸ªå¯¹å­ï¼Œæ‰€ä»¥æ ¹æ®ä¸Šé¢çš„å…¬å¼ï¼Œå®ƒä¼šå˜æˆä¸€ä¸ªå¬ç‰Œï¼Œä½†å®é™…ä¸Šæ˜¯ä¸€å‘å¬ã€‚åƒè¿™æ ·ç‰Œçš„ç§ç±»ä¸å¤Ÿçš„è¯ï¼Œä» 7 å‡å»ç‰Œçš„ç§ç±»çš„ä¸œè¥¿å¿…é¡»åŠ åˆ°å‘å¬æ•°ã€‚

![](https://img-blog.csdnimg.cn/img_convert/f9a77c7457ac5a1d9058b6c3fe3989fa.png)

ä¾‹å¦‚ï¼Œè¿™ä¸ªç‰Œå­æœ‰å››ä¸ªå¯¹å­å’Œå››ç§ç‰Œå­,

å‘å¬æ•° = 6-4 + (7-4) = 5

- å›½å£«æ— åŒï¼ˆåä¸‰å¹ºï¼‰çš„å‘å¬è®¡ç®—

å¦‚æœæ•°å‡ºä¸€ä¹å­—ç‰Œçš„ç§ç±»ï¼Œå†ç”¨ 13 å‡å»ï¼Œé‚£å°±æ˜¯å‘å¬æ•°ã€‚ä½†æ˜¯å¦‚æœæœ‰ä¸€ä¸ªå¯¹å­ï¼Œå¯ä»¥æŠŠä¸€ä¸ªå‘å¬å‡å°‘åˆ°æœ€å¤§é™åº¦ã€‚

å¦‚ä¸‹é¢è¿™ç§æƒ…å†µï¼Œå› ä¸ºä¸€ä¹å­—ç‰Œæœ‰ 12 ç§ï¼Œå¯¹å­æ˜¯ä¸€ä¸ªï¼Œæ‰€ä»¥ä»¥ 13-12-1 æ˜¯ 0 chantenï¼Œä¹Ÿå°±æ˜¯å¬ç‰Œã€‚

![](https://img-blog.csdnimg.cn/img_convert/df9125f4d48888362686e1d78be65a2b.png)

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸èƒ½ä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•ï¼Œæ‰€ä»¥ 13-11-1 å°±æ˜¯ 1 chantenã€‚

![](https://img-blog.csdnimg.cn/img_convert/9084d87c1e4ad72abc5a54c00b7b291d.png)

æœ€åæ˜¯æ¯”è¾ƒéº»çƒ¦çš„æ ‡å‡†å’Œç‰Œå‹

- æ ‡å‡†å’Œç‰Œå‹çš„å‘å¬è®¡ç®—

æ±‚è§£æ–¹æ³•åŒ…æ‹¬è®¡ç®—é¢å­å’Œé¢å­å€™é€‰æ•°çš„æ•°é‡ï¼Œç„¶åç”¨ä¸‹é¢çš„å…¬å¼è®¡ç®—ã€‚

å‘å¬æ•° = 8- é¢å­æ•° Ã— 2- é¢å­å€™é€‰æ•°

è¿™é‡Œé¢å­æ˜¯æŒ‡å·²ç»å®Œæˆçš„é¢å­ï¼Œä¹Ÿå°±æ˜¯é¡ºå­å’Œåˆ»å­ã€‚é¢å­å€™é€‰æ˜¯æŒ‡å†è¿‡ä¸€å¼ å°±è¦é¢å­çš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯å¯¹å­å’Œæ­å­ã€‚

åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦æ³¨æ„ä¸¤ç§æƒ…å†µã€‚

âš ï¸ ä¸€ç§æ˜¯ï¼Œé¢å­æ•°å’Œé¢å­å€™é€‰æ•°çš„æ€»æ•°ä¸å¾—è¶…è¿‡ 4 ä¸ªã€‚

![](https://img-blog.csdnimg.cn/img_convert/ce73e45d1cfddd8bf861e0af53888446.png)

ä¸¾ä¸ªä¾‹å­ï¼Œè¿™ä¸ªç‰Œå­æœ‰ä¸¤ä¸ªé¢å­ï¼Œå››ä¸ªå€™é€‰é¢å­ï¼Œæ‰€ä»¥å¦‚æœä½ ç”¨ä¸Šé¢çš„å…¬å¼æ¥è®¡ç®—

ï¼˜ï¼ï¼’ Ã— ï¼’ï¼ï¼”ï¼ï¼

ç„¶è€Œï¼Œå®é™…ä¸Šï¼Œä¸èƒ½ä½¿ç”¨é¢å­å€™é€‰æ•°ã€‚ è¿™æ˜¯æ‰€è°“çš„å¤šä½™é¢å­çš„çŠ¶æ€ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†ä½¿é¢å­å’Œé¢å­å€™é€‰æ•°çš„æ€»æ•°ä¸º 4ï¼Œå¿…é¡»å°†é¢éƒ¨å€™é€‰çš„æ•°é‡è®¡ä¸ºä¸¤ä¸ªã€‚ å¦‚æœä»¥æ­¤è®¡ç®—

ï¼˜ï¼ï¼’ Ã— ï¼’ï¼ï¼’ï¼ï¼’

ç„¶åä½ ä¼šå‘ç°è¿™å‰¯ç‰Œç¡®å®æ˜¯ä¸¤ä¸ªå‘å¬ã€‚

âš ï¸ å¦ä¸€ç§æ˜¯é›€å¤´ã€‚å¦‚æœé™¤äº†åœ¨ä¸Šé¢ä½¿ç”¨çš„ç‰Œä»¥å¤–ï¼Œå¯ä»¥å¾—åˆ°éº»é›€å¤´ï¼Œä»å‘å¬çš„æ•°é‡ä¸­å‡å» 1ã€‚ä¾‹å¦‚:

![](https://img-blog.csdnimg.cn/img_convert/65d0a75dd89d2c8a4fab2b08f819c7ea.png)

è®¡ç®—ä¸º

ï¼˜ï¼ï¼’ Ã— ï¼’ï¼ï¼’ï¼ï¼’

ä½†æ˜¯å› ä¸ºä¸€å¯¹å…«æ¡å¯ä»¥ä½œä¸ºé›€å¤´ä½¿ç”¨ï¼Œæ‰€ä»¥å˜æˆäº†ä¸€ä¸ªå‘å¬ã€‚

## æœºå™¨äººå‡ºç‰Œ

æˆ‘ä»¬çŸ¥é“äº†ã€**å’Œç‰Œçš„åˆ¤æ–­**ã€‘å’Œã€**å‘å¬çš„è®¡ç®—**ã€‘ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥æ•™æœºå™¨äººå¦‚ä½•å‡ºç‰Œäº†ã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯è®©æœºå™¨äººå’Œç‰Œï¼ˆè‹¥æœæ˜¯æƒ³è·å¾—ç¢¾å‹çš„å¿«æ„Ÿï¼Œåªåšä¸ªæ‘¸å•¥æ‰“å•¥çš„å‚»ç“œ ğŸ¤–ï¸ ä¹Ÿè¡Œã€‚ä½†æ˜¯æˆ‘è¿™ä¹ˆèªæ˜ï¼Œå‚»ç“œæœºå™¨äººè‚¯å®šæ˜¯æ»¡è¶³ä¸äº†æˆ‘çš„å•¦ï¼‰

æˆ‘ä»¬ä¹ŸçŸ¥é“ä¸å¯èƒ½æœºå™¨äººå¼€å±€çš„æ‰‹ç‰Œå°±å¯å’Œç‰Œï¼Œæ‰€ä»¥æœºå™¨äººè¦æœç€å’Œç‰Œçš„æ–¹å‘ï¼Œä¹Ÿå³ã€**å‘å¬å‡å°‘çš„æ–¹å‘**ã€‘ï¼Œå‰é¢è¯´è¿‡ã€**å’Œç‰Œçš„å‘å¬æ˜¯-1**ã€‘

æˆ‘ä»¬é¦–å…ˆè¦è®¡ç®—æ‘¸ç‰Œåçš„å½“å‰å‘å¬ï¼Œè‹¥ä¸º-1 åˆ™å’Œç‰Œï¼Œå¦åˆ™éœ€è¦å‡ºç‰Œï¼Œè€Œ**å‡ºä»€ä¹ˆç‰Œåˆ™æ˜¯å‡ºå“ªå¼ ç‰Œå¯ä»¥ä¿æŒå‘å¬ä¸å˜**ï¼Œä¸‹ä¸€è½®åˆ¤æ–­æ‘¸ç‰Œçš„å‘å¬ï¼Œ**æ‘¸åˆ°å“ªå¼ ç‰Œå¯ä»¥ä½¿å¾—å‘å¬å‰è¿›**ï¼ˆè¿™åœ¨éº»å°†æœ¯è¯­ä¸­å«åšã€Œè¿›å¼ ã€ï¼‰

é‚£å¦‚ä½•è®©æœºå™¨äººå®ç°å‘¢ï¼Ÿ

æˆ‘ä»¬å¯ä»¥å»ºç«‹æœç´¢æ ‘ï¼Œå½“å‰æ‰‹ç‰Œä¸ºæ ¹ï¼Œå¾€å‘å¬æ•°å‡å°‘æ–¹å‘æœç´¢ï¼Œç›´è‡³èƒ¡ç‰Œã€‚

æ–‡å­—è¡¨è¿°å¯èƒ½ä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œé‚£æˆ‘ç”»ä¸ªå›¾ç¤ºæ„ä¸€ä¸‹ï¼š

![](https://img-blog.csdnimg.cn/img_convert/38fdc9e9d6450f7ea014dd2772ef68cc.png)

## ä»£ç å®ç°

æ€è·¯å·²ç»æœ‰äº†ï¼Œé‚£å¦‚ä½•ç”¨ä»£ç å®ç°å‘¢ï¼Ÿ

æ³¨ âš ï¸ï¼šå› ä¸ºæ¶‰åŠåˆ°å•†ä¸šæ€§è´¨ï¼Œå…·ä½“çš„æŠ€æœ¯ç»†èŠ‚ä¸ä¾¿å…¬å¼€ï¼Œè¿™é‡Œåªåˆ†äº«ä¼ªä»£ç æ€è·¯å’Œç½‘ä¸Šäº†è§£çš„å¼€æºä»£ç ã€‚

### æ‰‹ç‰Œçš„ç»“æ„ä½“

é¦–å…ˆæ˜¯æ‰‹ç‰Œçš„å®šä¹‰ï¼Œæ€»å…±æœ‰ 34 ç§ç‰Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª 34 é•¿åº¦çš„æ•°ç»„ï¼Œå€¼ä¸ºå¯¹åº”ç‰Œå‡ºç°çš„æ¬¡æ•°ã€‚

æ¯”å¦‚ã€Œ111 ä¸‡ 11 ç­’ 111 æ¡ã€ï¼Œåˆ™ä¸º [3 0 0 0 0 0 0 0 0 2 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]

### å‘å¬çš„è®¡ç®—

æ ¹æ®å‰æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¦‚ä¸‹ç‰ˆæœ¬çš„å‘å¬çš„è®¡ç®—

```go
// ä¸€èˆ¬å‹çš„å‘å¬è®¡ç®—
func (st *Shanten) CalcNormalShanten() int32 {
	shanten := MaxShanten - 2*st.shunKeNums - st.daZiNums - st.pairsNums
	numMentsuKouho := st.shunKeNums + st.daZiNums
	if st.pairsNums > 0 {
		numMentsuKouho += st.pairsNums - 1 //æœ‰é›€å¤´æ—¶åŠ ä¸Šå¯¹å­æ•°-1
	} else if st.anGangBitMap > 0 && st.singleBitMap > 0 {
		if st.singleBitMap|st.anGangBitMap == st.anGangBitMap { // æ²¡æœ‰é›€å¤´ï¼Œä¸”é™¤äº†æš—æ å¤–æ²¡æœ‰å­¤å¼ ï¼Œè¿™ä¸ªæ—¶å€™è¿å•å¬éƒ½å¬ä¸äº†
			// æ¯”å¦‚ 5555m åº”è¯¥ç®—ä½œä¸€å‘å¬
			shanten++
		}
	}

	if numMentsuKouho > 5 { // é¢å­å€™è¡¥è¿‡å¤š
		shanten += numMentsuKouho - 5
	}

	//3N+2 æ˜¯è‡ªå·±å‡ºç‰Œï¼Œå‡ºæ‰ä¸€å¼ å¿…å‡ºç‰Œ
	if shanten != -1 && CountOfTiles34(st.handTiles34)%3 == 2 {
		st.mustOutNums--
	}

	if shanten != -1 && shanten < st.mustOutNums {
		return st.mustOutNums
	}

	return shanten
}
```

å¦å¤–ï¼Œå¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œç”¨ä¸€ç§ç¼–ç å¯ä»¥è¿›è¡Œä¼˜åŒ–ï¼Œçœ‹ç½‘ä¸Šè¯´æ˜¯æ”¹è¿›çš„éœå¤«æ›¼ç¼–ç ã€‚åˆ™å¯ä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ¤æ–­å’Œç‰Œï¼Œä»£ç æ¥è‡ªhttp://hp.vector.co.jp/authors/VA046927/mjscore/mjalgorism.html

```go
// 3k+2 å¼ ç‰Œï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æ‹†è§£ï¼Œæ²¡æœ‰æ‹†è§£è¡¨ç¤ºæœªå’Œç‰Œï¼ˆä¸æ£€æµ‹å›½å£«æ— åŒï¼‰
// http://hp.vector.co.jp/authors/VA046927/mjscore/mjalgorism.html
// http://hp.vector.co.jp/authors/VA046927/mjscore/AgariIndex.java
func DivideTiles34(tiles34 []int) (divideResults []*DivideResult) {
	fmt.Println(tiles34)
	tiles14 := make([]int, 14)
	tiles14TailIndex := 0

	key := 0
	bitPos := -1

	// æ•°ç‰Œï¼ˆ1-9ä¸‡æ¡ç­’ï¼‰
	idx := -1
	for i := 0; i < 3; i++ {
		prevInHand := false // ä¸Šä¸€å¼ ç‰Œæ˜¯å¦åœ¨æ‰‹ç‰Œä¸­
		for j := 0; j < 9; j++ {
			idx++
			if c := tiles34[idx]; c > 0 {
				tiles14[tiles14TailIndex] = idx
				tiles14TailIndex++

				prevInHand = true
				bitPos++
				switch c {
				case 2:
					key |= 0x3 << uint(bitPos)
					bitPos += 2
				case 3:
					key |= 0xF << uint(bitPos)
					bitPos += 4
				case 4:
					key |= 0x3F << uint(bitPos)
					bitPos += 6
				}
			} else {
				if prevInHand {
					prevInHand = false
					key |= 0x1 << uint(bitPos)
					bitPos++
				}
			}
		}
		if prevInHand {
			key |= 0x1 << uint(bitPos)
			bitPos++
		}
	}

	// å­—ç‰Œï¼ˆä¸œå—è¥¿åŒ—ä¸­å‘ç™½ï¼‰
	for i := 27; i < 34; i++ {
		if c := tiles34[i]; c > 0 {
			tiles14[tiles14TailIndex] = i
			tiles14TailIndex++

			bitPos++
			switch c {
			case 2:
				key |= 0x3 << uint(bitPos)
				bitPos += 2
			case 3:
				key |= 0xF << uint(bitPos)
				bitPos += 4
			case 4:
				key |= 0x3F << uint(bitPos)
				bitPos += 6
			}
			key |= 0x1 << uint(bitPos)
			bitPos++
		}
	}

	results, ok := winTable[key]
	if !ok {
		return
	}

	// 3bit  0: åˆ»å­æ•°(0ï½4)
	// 3bit  3: é¡ºå­æ•°(0ï½4)
	// 4bit  6: é›€å¤´ä½ç½®(1ï½13)
	// 4bit 10: é¢å­ä½ç½®1(0ï½13) åˆ»å­åœ¨å‰ï¼Œé¡ºå­åœ¨å
	// 4bit 14: é¢å­ä½ç½®2(0ï½13)
	// 4bit 18: é¢å­ä½ç½®3(0ï½13)
	// 4bit 22: é¢å­ä½ç½®4(0ï½13)
	// 1bit 26: ä¸ƒå¯¹å­
	// 1bit 27: ä¹è²å®ç¯
	// 1bit 28: ä¸€æ°”é€šè´¯
	// 1bit 29: ä¸¤æ¯å£
	// 1bit 30: ä¸€æ¯å£
	for _, r := range results {
		// é›€å¤´
		pairTile := tiles14[(r>>6)&0xF]

		// åˆ»å­
		numKotsu := r & 0x7
		kotsuTiles := make([]int, numKotsu)
		for i := range kotsuTiles {
			kotsuTiles[i] = tiles14[(r>>uint(10+i*4))&0xF]
		}

		// é¡ºå­çš„ç¬¬ä¸€å¼ ç‰Œ
		numShuntsu := (r >> 3) & 0x7
		shuntsuFirstTiles := make([]int, numShuntsu)
		for i := range shuntsuFirstTiles {
			shuntsuFirstTiles[i] = tiles14[(r>>uint(10+(numKotsu+i)*4))&0xF]
		}

		divideResults = append(divideResults, &DivideResult{
			PairTile:          pairTile,
			KotsuTiles:        kotsuTiles,
			ShuntsuFirstTiles: shuntsuFirstTiles,
			IsChiitoi:         r&(1<<26) != 0,
			IsChuurenPoutou:   r&(1<<27) != 0,
			IsIttsuu:          r&(1<<28) != 0,
			IsRyanpeikou:      r&(1<<29) != 0,
			IsIipeikou:        r&(1<<30) != 0,
		})
	}

	return
}
```

### æœç´¢æ ‘çš„å®ç°

å¯ä»¥æ„å»ºä¸¤ä¸ªç»“æ„ä½“ä½œä¸ºæœç´¢æ ‘çš„ä¸¤ç§èŠ‚ç‚¹ï¼Œè¿›è¡Œé€’å½’è°ƒç”¨

```go
//3N+2èŠ‚ç‚¹
type SearchNode3N2 struct {
	shanten  int32
	children map[int32]*SearchNode3N1 // å‘å¬ä¸å˜çš„èˆç‰Œ-node13
}

//3N+1èŠ‚ç‚¹
type SearchNode3N1 struct {
	shanten  int32
	waits    map[int32]int32          // map[è¿›å¼ ç‰Œ]å‰©ä½™æ•°
	children map[int32]*SearchNode3N2 // å‘å¬å‰è¿›çš„æ‘¸ç‰Œ-node14
	huType   map[string]bool          // èƒ¡ç‰Œç±»å‹ï¼Œç”¨äºæ˜¾ç¤º
	huScores map[int32]int32          // map[è¿›å¼ ç‰Œ]èƒ¡ç‰ŒæœŸæœ›åˆ†
}
```

å› ä¸ºé€’å½’è°ƒç”¨çš„æ ˆå±‚æ•°å¤ªå¤šï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå…¨å±€ map åšå¤‡å¿˜å½•è¿›è¡Œä¼˜åŒ–ï¼Œæˆ‘æƒ³è¿‡ç”¨ dp åŠ¨æ€è§„åˆ’æ›¿ä»£é€’å½’å†™æ³•ï¼Œä½†æ˜¯çŠ¶æ€è½¬ç§»å®åœ¨å¤ªå¤šäº†ï¼Œæ²¡æœ‰å®ç°ã€‚

```go
// 	ä¼˜åŒ–--å…¨å±€mapï¼Œè®°å½•å½“å‰æ‰‹ç‰Œæ¨èå‡ºç‰Œ
var _Search3N2MapType *Search3N2MapType

type Search3N2MapType struct {
	sync.RWMutex                           // è¯»å†™é”
	search3N2Map map[string]*SearchNode3N2 // map[æ‰‹ç‰Œ+å‰©ä½™ç‰Œ]å‡ºç‰Œå¯èƒ½
}
```

é¦–å…ˆè°ƒç”¨çš„æ˜¯å‡ºç‰Œï¼Œä»¥ä¸‹æ˜¯ä¼ªä»£ç 

```go
// å‡ºç‰Œç®—æ³•ï¼Œ3N2æ•°é‡å‡ºç‰Œï¼Œè¿”å›3N2èŠ‚ç‚¹
func _search3N2(å½“å‰å‘å¬ï¼Œåœæ­¢å‘å¬ï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œmapå¤‡å¿˜å½•) *SearchNode3N2 {
  å­©å­èŠ‚ç‚¹ := map[int32]*SearchNode3N1{}
  //1.å·²ç»å’Œç‰Œï¼Œç›´æ¥è¿”å›
  if å½“å‰å‘å¬ == -1 {
    return &SearchNode3N2{å½“å‰å‘å¬ï¼Œå­©å­èŠ‚ç‚¹}
  }
  //2.åœ¨mapå¤‡å¿˜å½•ä¸­æŸ¥æ˜¯å¦å­˜åœ¨å½“å‰æ‰‹ç‰Œæƒ…å†µ
  searchNode3N2, exsit := _Search3N2MapType.Get(hash(æ‰‹ç‰Œ+å‰©ä½™ç‰Œ))
  if exsit {
    return searchNode3N2
  }
  //3.mapå¤‡å¿˜å½•ä¸­æ²¡æœ‰ï¼Œåˆ™éå†å‡ºç‰Œæƒ…å†µ
  for i := range å½“å‰æ‰‹ç‰Œ {
    //è®¡ç®—å‡ºç‰Œåçš„å‘å¬ï¼Œå¦‚æœå‘å¬ä¸å˜ï¼Œåˆ™èˆç‰Œæ­£ç¡®
    if å‡ºç‰Œå‘å¬ == å½“å‰å‘å¬ {
      //é€’å½’æœç´¢å­©å­èŠ‚ç‚¹çš„æ‘¸ç‰Œæƒ…å†µ
      å­©å­èŠ‚ç‚¹[i] = _search3N1(å‡ºç‰Œå‘å¬ï¼Œåœæ­¢å‘å¬ï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œmapå¤‡å¿˜å½•)
    }
  }
  //4.å°†SearchNode3N2å­˜å…¥mapä¸­
  _Search3N2MapType.Set(hash(æ‰‹ç‰Œ+å‰©ä½™ç‰Œ), &SearchNode3N2{å½“å‰å‘å¬ï¼Œå­©å­èŠ‚ç‚¹})
  //5.è¿”å›
  return &SearchNode3N2{å½“å‰å‘å¬ï¼Œå­©å­èŠ‚ç‚¹}
}
```

æ­£ç¡®çš„å‡ºç‰Œåä¼šè°ƒç”¨åˆ°æ‘¸ç‰Œï¼Œæ‘¸ç‰Œè¿›å¼ æ—¶ä¹Ÿä¼šé€’å½’è°ƒç”¨å‡ºç‰Œ

```go
// æ‘¸ç‰Œç®—æ³•ï¼Œ3N1æ•°é‡æ‘¸ç‰Œï¼Œè¿”å›3N1èŠ‚ç‚¹
func _search3N1(å½“å‰å‘å¬ï¼Œåœæ­¢å‘å¬ï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œmapå¤‡å¿˜å½•) *SearchNode3N1 {
  //1.ä»å‰©ä½™ç‰Œå †é‡Œæ‘¸ç‰Œ
  for i := range å‰©ä½™ç‰Œå † {
    //2.è®¡ç®—æ‘¸ç‰Œåæ‘¸ç‰Œå‘å¬ï¼Œ
    //ä¼˜åŒ–ï¼Œè‹¥æ‘¸ç‰Œå‘å¬>2ï¼Œåªæ¯”è¾ƒç‰Œæ•ˆç‡
    if æ‘¸ç‰Œå‘å¬ > 2 {
      //å°äºå½“å‰å‘å¬ä¸ºè¿›å¼ 
      if æ‘¸ç‰Œå‘å¬ < å½“å‰å‘å¬ {
        //é€’å½’æœç´¢å­©å­èŠ‚ç‚¹çš„å‡ºç‰Œæƒ…å†µ
				å­©å­èŠ‚ç‚¹[i] = _search3N2(æ‘¸ç‰Œå‘å¬, åœæ­¢å‘å¬, ç”¨æˆ·ä¿¡æ¯, mapå¤‡å¿˜å½•)
      }
    }
    //ä¼˜åŒ–ï¼Œè‹¥æ‘¸ç‰Œå‘å¬<2ï¼Œè®¡ç®—åˆ°å’Œç‰Œ
    else {
      //æ£€æµ‹èƒ½å¦å’Œç‰Œ
      if å’Œç‰Œ {
        è®¾ç½®å’Œç‰Œæ•°æ®
      }else if æ‘¸ç‰Œå‘å¬ < å½“å‰å‘å¬ {
        å­©å­èŠ‚ç‚¹[i] = _search3N2(æ‘¸ç‰Œå‘å¬, åœæ­¢å‘å¬, ç”¨æˆ·ä¿¡æ¯, mapå¤‡å¿˜å½•)
      }
    }
  }
  return &SearchNode3N1{å½“å‰å‘å¬,è¿›å¼ ç‰Œ,å­©å­èŠ‚ç‚¹,èƒ¡ç‰ŒæœŸæœ›åˆ†,å’Œç‰Œç±»å‹}
}
```

## çµ®

ä»¥ä¸Šå°±æ˜¯æœºå™¨äººéº»å°†ç®—æ³•çš„å¤§è‡´å†…å®¹äº†ï¼Œä½ ä¹Ÿå¿«å†™ä¸ªæœºå™¨äººé™ªè‡ªå·±æ‰“éº»å°†å§ï¼ä»€ä¹ˆï¼Ÿä½ æœ‰å¥³æœ‹å‹ï¼Ÿ

![](https://img-blog.csdnimg.cn/img_convert/3df9f8995565c4487f7212a7d11257dc.png)

ç­‰ç­‰ï¼çœ‹åœ¨æˆ‘è¿™ä¹ˆè´¹å¿ƒçš„ä»½ä¸Šç‚¹ä¸ªã€**åœ¨çœ‹**ã€‘åœ¨â€æ»šâ€œå‘—ï½

![](https://img-blog.csdnimg.cn/img_convert/7969ebeb51d918d1825bfe7b7aaf35e4.png)

å¦å¤–ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ä¸ªäººå…¬ä¼—å·â€œ**Kevin çš„å­¦å ‚**â€œï¼Œæ›´å¤šå¹²è´§ç­‰ç€ä½ ï¼

## å‚è€ƒ

1. å’Œç‰Œåˆ¤å®š http://hp.vector.co.jp/authors/VA046927/mjscore/mjalgorism.html
2. å‘å¬è®¡ç®—æ–¹æ³•http://ara.moo.jp/mjhmr/shanten.htm
